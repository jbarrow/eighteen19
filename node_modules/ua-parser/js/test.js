var assert = require('assert'),
    path = require('path'), 
    fs = require('fs'),
    yaml = require('yamlparser'),
    uaParser = require('./index');

function readYAML(fileName) {
  var file = path.join(__dirname, '..', 'test_resources', fileName);
  var fixtures = fs.readFileSync(file, 'utf8');
  fixtures = yaml.eval(fixtures);
  return fixtures;
}

['firefox_user_agent_strings.yaml', 'test_user_agent_parser.yaml'].forEach(function(fileName) {
  var fixtures = readYAML(fileName).test_cases;
  suite(fileName, function() {
    fixtures.forEach(function(f) {
      test(f.user_agent_string, function() {
        var r = uaParser.parse(f.user_agent_string)
        assert.strictEqual(f.family, r.family);
        assert.equal(f.v1, r.major);
        assert.equal(f.v2, r.minor);
        assert.equal(f.v3, r.patch);
      });
    });
  });
});



